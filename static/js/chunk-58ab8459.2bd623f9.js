(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58ab8459"],{"2ee3":function(t,e,a){},"5d1e":function(t,e,a){"use strict";var o=a("c46e"),s=a.n(o);s.a},"6d14":function(t,e,a){"use strict";var o=a("c8ec"),s=a.n(o);s.a},"80c1":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("common-layout",[a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("span",{staticClass:"title"},[t._v("後台系統登入")])])]),a("div",{staticClass:"login",staticStyle:{"margin-top":"30px"}},[a("a-form",{staticStyle:{padding:"15px"},attrs:{form:t.form},on:{submit:t.onSubmit}},[a("a-alert",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:t.error,showIcon:""}}),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '请输入账户名', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"admin"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '请输入密码', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"888888",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input-group",{attrs:{compact:""}},[a("a-input",{staticStyle:{width:"50%"},attrs:{size:"large",placeholder:"驗證碼",value:t.inputRandom},model:{value:t.inputRandom,callback:function(e){t.inputRandom=e},expression:"inputRandom"}}),a("a-form-item",{staticStyle:{width:"50%",height:"39px"}},[a("random",{on:{changeCode:t.theChangeCode}})],1)],1)],1),a("div"),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:t.logging,size:"large",htmlType:"submit",type:"primary"}},[t._v("登入")])],1),a("div")],1)],1)])},s=[],r=(a("a9e3"),a("5530")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-layout"},[a("div",{staticClass:"content"},[t._t("default")],2),a("page-footer",{attrs:{"link-list":t.footerLinks,copyright:t.copyright}})],1)},n=[],c=a("613e"),u=a("5880"),m={name:"CommonLayout",components:{PageFooter:c["a"]},computed:Object(r["a"])({},Object(u["mapState"])("setting",["footerLinks","copyright"]))},d=m,l=(a("6d14"),a("2877")),p=Object(l["a"])(d,i,n,!1,null,"1c265f57",null),h=p.exports,g=a("93d6"),f=a("b775"),b=a("89a5"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"randomBox",style:t.bdC},[a("div",{staticClass:"outBox",style:t.bdO},[a("div",{staticClass:"NumBox"},[a("div",{style:t.NOS},[t._v(t._s(t.NO))]),a("div",{style:t.NTS},[t._v(t._s(t.NT))]),a("div",{style:t.NTRS},[t._v(t._s(t.NTR))]),a("div",{style:t.NFS},[t._v(t._s(t.NF))])]),a("div",{staticClass:"refrashBox"},[a("a-button",{attrs:{type:"primary",icon:"redo"},on:{click:t.redo}})],1)])])},w=[],N={data:function(){return{bdO:"background-image:url('randomCode.png') ;background-position:0% 0%",bdC:"background:RGB(111,111,111)",NO:"8",NT:"6",NTR:"1",NF:"2",NOS:"transform: skew(-1deg)",NTS:"transform: skew(10deg)",NTRS:"transform: skew(5deg)",NFS:"transform: skew(0deg)",code:""}},mounted:function(){this.redo()},computed:{},watch:{code:function(t){this.$emit("changeCode",t,this.code)}},methods:{redo:function(){var t=this.twoNumber(0,210),e=this.twoNumber(0,225),a=this.twoNumber(0,225),o=this.twoNumber(0,210),s=this.twoNumber(0,225),r=this.twoNumber(0,225),i=this.twoNumber(0,20),n=this.twoNumber(0,20);this.bdC="background:RGB("+t+","+e+","+a+");color:#fff;background-image:linear-gradient(to right, rgba("+t+","+e+","+a+",0), rgba("+o+","+s+","+r+",1));",this.bdO="background-image:url('randomCode.png') ;background-position:"+i+"% "+n+"%";var c=this.twoNumber(1e3,9999),u=parseInt(c/1e3),m=parseInt((c-1e3*u)/100),d=parseInt((c-1e3*u-100*m)/10),l=c-1e3*u-100*m-10*d;this.NO=u,this.NT=m,this.NTR=d,this.NF=l,this.code=c;var p=this.twoNumber(-30,30),h=this.twoNumber(-30,30),g=this.twoNumber(-30,30),f=this.twoNumber(-30,30);this.NOS="transform: skew("+p+"deg)",this.NTS="transform: skew("+h+"deg)",this.NTRS="transform: skew("+g+"deg)",this.NFS="transform: skew("+f+"deg)"},twoNumber:function(t,e){var a=e-t,o=Math.random(),s=t+Math.round(o*a);return s}}},y=N,k=(a("bee2"),Object(l["a"])(y,v,w,!1,null,"eb378c08",null)),C=k.exports,x=C,O={name:"Login",components:{CommonLayout:h,random:x},data:function(){return{logging:!1,error:"",form:this.$form.createForm(this),randomCode:"",inputRandom:""}},computed:{systemName:function(){return this.$store.state.setting.systemName}},methods:Object(r["a"])(Object(r["a"])({},Object(u["mapMutations"])("account",["setUser","setPermissions","setRoles"])),{},{onSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t){if(!t){e.logging=!0;var a=e.form.getFieldValue("name"),o=e.form.getFieldValue("password");Number(e.randomCode)!==Number(e.inputRandom)?e.$confirm({title:"請確認驗證碼",content:"請輸入正確的驗證碼",onOk:function(){location.reload()},cancelButtonProps:{style:{display:"none"}}}):Object(g["b"])(a,o).then(e.afterLogin)}}))},afterLogin:function(t){var e=this;this.logging=!1;var a=t.data;if(a.code>=0){var o=a.data,s=o.user,r=o.permissions,i=o.roles;this.setUser(s),this.setPermissions(r),this.setRoles(i),Object(f["f"])({token:a.data.token,expireAt:new Date(a.data.expireAt)}),Object(g["a"])().then((function(t){var o=t.data.data;Object(b["d"])(o),e.$router.push("/playerList"),e.$message.success(a.message,3)}))}else this.error=a.message},theChangeCode:function(t){this.randomCode=t}})},S=O,_=(a("5d1e"),Object(l["a"])(S,o,s,!1,null,"3e77cc88",null)),R=_.exports;e["default"]=R},bee2:function(t,e,a){"use strict";var o=a("2ee3"),s=a.n(o);s.a},c46e:function(t,e,a){},c8ec:function(t,e,a){}}]);