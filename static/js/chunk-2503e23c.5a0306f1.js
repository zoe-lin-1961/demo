(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2503e23c"],{"2ee3":function(t,e,o){},"573c":function(t,e,o){"use strict";var a=o("c076"),r=o.n(a);r.a},"6d14":function(t,e,o){"use strict";var a=o("c8ec"),r=o.n(a);r.a},"80c1":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("common-layout",[o("div",{staticClass:"top"},[o("div",{staticClass:"header"},[o("span",{staticClass:"title"},[t._v("後台系統登入")])])]),o("div",{staticClass:"login",staticStyle:{"margin-top":"30px"}},[o("a-form",{staticStyle:{padding:"15px"},attrs:{form:t.form},on:{submit:t.onSubmit}},[t.error?o("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:t.error,showIcon:""},on:{close:t.onClose}}):t._e(),o("a-form-item",[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"請輸入帳號",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '請輸入帳號', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"請輸入帳號"}},[o("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),o("a-form-item",[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"請輸入密碼",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '請輸入密碼', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"請輸入密碼",autocomplete:"autocomplete",type:"password"}},[o("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),o("a-form-item",[o("a-input-group",{attrs:{compact:""}},[o("a-input",{staticStyle:{width:"50%"},attrs:{size:"large",placeholder:"驗證碼",value:t.inputRandom},model:{value:t.inputRandom,callback:function(e){t.inputRandom=e},expression:"inputRandom"}}),o("a-form-item",{staticStyle:{width:"50%",height:"39px"}},[o("random",{on:{changeCode:t.theChangeCode}})],1)],1)],1),o("div"),o("a-form-item",[o("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:t.logging,size:"large",htmlType:"submit",type:"primary"}},[t._v("登入")])],1),o("div")],1)],1)])},r=[],s=(o("a9e3"),o("5530")),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"common-layout"},[o("div",{staticClass:"content"},[t._t("default")],2),o("page-footer",{attrs:{"link-list":t.footerLinks,copyright:t.copyright}})],1)},i=[],c=o("613e"),u=o("5880"),d={name:"CommonLayout",components:{PageFooter:c["a"]},computed:Object(s["a"])({},Object(u["mapState"])("setting",["footerLinks","copyright"]))},m=d,l=(o("6d14"),o("2877")),p=Object(l["a"])(m,n,i,!1,null,"1c265f57",null),h=p.exports,f=o("93d6"),g=o("b775"),b=o("89a5"),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"randomBox",style:t.bdC},[o("div",{staticClass:"outBox",style:t.bdO},[o("div",{staticClass:"NumBox"},[o("div",{style:t.NOS},[t._v(t._s(t.NO))]),o("div",{style:t.NTS},[t._v(t._s(t.NT))]),o("div",{style:t.NTRS},[t._v(t._s(t.NTR))]),o("div",{style:t.NFS},[t._v(t._s(t.NF))])]),o("div",{staticClass:"refrashBox"},[o("a-button",{attrs:{type:"primary",icon:"redo"},on:{click:t.redo}})],1)])])},w=[],N={data:function(){return{bdO:"background-image:url('randomCode.png') ;background-position:0% 0%",bdC:"background:RGB(111,111,111)",NO:"8",NT:"6",NTR:"1",NF:"2",NOS:"transform: skew(-1deg)",NTS:"transform: skew(10deg)",NTRS:"transform: skew(5deg)",NFS:"transform: skew(0deg)",code:""}},mounted:function(){this.redo()},computed:{},watch:{code:function(t){this.$emit("changeCode",t,this.code)}},methods:{redo:function(){var t=this.twoNumber(0,210),e=this.twoNumber(0,225),o=this.twoNumber(0,225),a=this.twoNumber(0,210),r=this.twoNumber(0,225),s=this.twoNumber(0,225),n=this.twoNumber(0,20),i=this.twoNumber(0,20);this.bdC="background:RGB("+t+","+e+","+o+");color:#fff;background-image:linear-gradient(to right, rgba("+t+","+e+","+o+",0), rgba("+a+","+r+","+s+",1));",this.bdO="background-image:url('randomCode.png') ;background-position:"+n+"% "+i+"%";var c=this.twoNumber(1e3,9999),u=parseInt(c/1e3),d=parseInt((c-1e3*u)/100),m=parseInt((c-1e3*u-100*d)/10),l=c-1e3*u-100*d-10*m;this.NO=u,this.NT=d,this.NTR=m,this.NF=l,this.code=c;var p=this.twoNumber(-30,30),h=this.twoNumber(-30,30),f=this.twoNumber(-30,30),g=this.twoNumber(-30,30);this.NOS="transform: skew("+p+"deg)",this.NTS="transform: skew("+h+"deg)",this.NTRS="transform: skew("+f+"deg)",this.NFS="transform: skew("+g+"deg)"},twoNumber:function(t,e){var o=e-t,a=Math.random(),r=t+Math.round(a*o);return r}}},y=N,k=(o("bee2"),Object(l["a"])(y,v,w,!1,null,"eb378c08",null)),C=k.exports,O=C,x={name:"Login",components:{CommonLayout:h,random:O},data:function(){return{logging:!1,error:"",form:this.$form.createForm(this),randomCode:"",inputRandom:""}},computed:{},methods:Object(s["a"])(Object(s["a"])({},Object(u["mapMutations"])("account",["setUser","setPermissions","setRoles"])),{},{onSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t){if(!t){e.logging=!0;var o=e.form.getFieldValue("name"),a=e.form.getFieldValue("password");Number(e.randomCode)!==Number(e.inputRandom)?e.$confirm({title:"請確認驗證碼",content:"請輸入正確的驗證碼",onOk:function(){location.reload()},cancelButtonProps:{style:{display:"none"}}}):(Object(f["b"])(o,a).then(e.afterLogin),Object(f["b"])(o,a).then((function(t){if(void 0!==t.data.token){var o=t.data.token;e.getUserData(o)}})).catch((function(t){e.$confirm({title:"帳號 / 密碼 錯誤",content:"請輸入正確的 帳號 / 密碼",onOk:function(){location.reload()},cancelButtonProps:{style:{display:"none"}}})})))}}))},getUserData:function(t){var e=this,o="",a=(new Date).getFullYear(),r=(new Date).getMonth()+1,s=(new Date).getDate();r<10&&(r="0"+r),s<10&&(s="0"+s),o=a+"-"+r+"-"+s+" 23:59:59",Object(g["f"])({token:t,expireAt:new Date(o)}),Object(f["d"])().then((function(t){var o=t.data;e.setUser(o),e.$router.push("/playerList")}))},afterLogin:function(t){var e=this;this.logging=!1;var o=t.data;if(o.code>=0){var a=o.data,r=a.user,s=a.permissions,n=a.roles;this.setUser(r),this.setPermissions(s),this.setRoles(n),Object(g["f"])({token:o.data.token,expireAt:new Date(o.data.expireAt)}),Object(f["a"])().then((function(t){var a=t.data.data;Object(b["d"])(a),e.$router.push("/playerList"),e.$message.success(o.message,3)}))}else this.error=o.message},onClose:function(){this.error=!1},theChangeCode:function(t){this.randomCode=t}})},S=x,_=(o("573c"),Object(l["a"])(S,a,r,!1,null,"0f9bb604",null)),R=_.exports;e["default"]=R},bee2:function(t,e,o){"use strict";var a=o("2ee3"),r=o.n(a);r.a},c076:function(t,e,o){},c8ec:function(t,e,o){}}]);